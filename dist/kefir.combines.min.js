!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.kefir||(e.kefir={})).combines=t()}}(function(){return function t(e,n,r){function i(a,l){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!l&&u)return u(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[a]={exports:{}};e[a][0].call(s.exports,function(t){var n=e[a][1][t];return i(n?n:t)},s,s.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";function r(t,e){if(t instanceof d.Observable)e(t);else{var n=t&&t.constructor;if(n===Array)for(var i=0,o=t.length;i<o;++i)r(t[i],e);else if(n===Object)for(var a in t)r(t[a],e)}}function i(t){for(var e=0,n=0,r=t.length;n<r;++n)e+=l(t[n]);return e}function o(t){var e=0;for(var n in t)e+=l(t[n]);return e}function a(t){if(t){var e=t.constructor;if(e===Array)return i(t);if(e===Object)return o(t)}return 0}function l(t){return t instanceof d.Observable?1:a(t)}function u(t,e,n){var i=-1;r(t,function(t){var r=function t(e){return n._handleAny(t,e)};e[++i]=r,t.onAny(r)})}function f(t,e){var n=-1;r(t,function(t){var r=e[++n];r&&t.offAny(r)})}function s(t,e,n){if(t instanceof d.Observable)return e[++n.index];var r=t&&t.constructor;if(r===Array){for(var i=t.length,o=Array(i),a=0;a<i;++a)o[a]=s(t[a],e,n);return o}if(r===Object){var l={};for(var u in t)l[u]=s(t[u],e,n);return l}return t}function c(t){if(!(t instanceof Array))return t;var e=t.length-1,n=t[e];return n instanceof Function?n.apply(void 0,t.slice(0,e)):t}function h(){d.Property.call(this)}function v(t,e){h.call(this),this._template=t,this._handlers=e,this._values=null}function p(t){h.call(this),this._template=t,this._handler=null}function _(t,e){h.call(this),this._observable=t,this._fn=e,this._handler=null}Object.defineProperty(n,"__esModule",{value:!0}),n.lift=n.lift1=n.lift1Shallow=void 0,n.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=i(e);switch(r){case 0:return c(e);case 1:return 2===e.length&&e[0]instanceof d.Observable&&e[1]instanceof Function?new _(e[0],e[1]):new p(e);default:return new v(e,r)}};var d=t("kefir"),y=t("infestines");h.prototype=Object.create(d.Property.prototype),h.prototype._maybeEmitValue=function(t){var e=this._currentEvent;e&&(0,y.identicalU)(e.value,t)||this._emitValue(t)},v.prototype=Object.create(h.prototype),v.prototype._onActivation=function(){for(var t=this._template,e=this._handlers,n=Array(e),r=Array(e),i=0;i<e;++i)r[i]=this,n[i]=this;this._handlers=n,this._values=r,u(t,n,this)},v.prototype._handleAny=function(t,e){for(var n=this._handlers,r=0;n[r]!==t;)++r;switch(e.type){case"value":var i=this._values;i[r]=e.value;for(var o=0,a=i.length;o<a;++o)if(i[o]===this)return;this._maybeEmitValue(c(s(this._template,i,{index:-1})));break;case"error":this._emitError(e.value);break;default:n[r]=null;for(var l=0,u=n.length;l<u;++l)if(n[l])return;this._handlers=n.length,this._values=null,this._emitEnd()}},v.prototype._onDeactivation=function(){var t=this._handlers;this._handlers=t.length,this._values=null,f(this._template,t)},p.prototype=Object.create(h.prototype),p.prototype._onActivation=function(){var t=this,e=function(e){return t._handleAny(e)};this._handler=e,r(this._template,function(t){return t.onAny(e)})},p.prototype._handleAny=function(t){switch(t.type){case"value":this._maybeEmitValue(c(s(this._template,[t.value],{index:-1})));break;case"error":this._emitError(t.value);break;default:this._handler=null,this._emitEnd()}},p.prototype._onDeactivation=function(){var t=this._handler;this._handler=null,r(this._template,function(e){return e.offAny(t)})},_.prototype=Object.create(h.prototype),_.prototype._onActivation=function(){var t=this,e=function(e){return t._handleAny(e)};this._handler=e,this._observable.onAny(e)},_.prototype._handleAny=function(t){switch(t.type){case"value":this._maybeEmitValue(this._fn(t.value));break;case"error":this._emitError(t.value);break;default:this._handler=null,this._emitEnd()}},_.prototype._onDeactivation=function(){var t=this._handler,e=this._observable;this._handler=null,e.offAny(t)};var b=(n.lift1Shallow=function(t){return function(e){return e instanceof d.Observable?new _(e,t):t(e)}},n.lift1=function(t){return function(e){if(e instanceof d.Observable)return new _(e,t);var n=a(e);return 0===n?t(e):1===n?new p([e,t]):new v([e,t],n)}});n.lift=function(t){return(0,y.arityN)(t.length,function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(1===n.length)return b(t)(n[0]);var o=i(n);return 0===o?t.apply(void 0,n):(1===o&&new p([].concat(n,[t])),new v([].concat(n,[t]),o))})}},{infestines:void 0,kefir:void 0}]},{},[1])(1)});
